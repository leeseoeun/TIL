# 혼자 공부하는 네트워크

<br>

## Chapter 01 컴퓨터 네트워크 시작하기

<br>

- ```java
    // 컴퓨터 구조와 운영체제 위에 네트워크가 있음
    네트워크
    -------------------------
    컴퓨터 구조 + 운영체제
    ```
- 네트워크 구조는 많이 볼수록 좋음
- 시스템 아키텍처 관련
    - [ByteByteGo](https://bytebytego.com/)
        - [아티클](https://blog.bytebytego.com/)
        - [유튜브](https://www.youtube.com/@ByteByteGo/videos)
- 운영 / 로드 밸런스는
    1. 컴퓨터 구조
    2. `네트워크`(http)를 알아야 함
- `DNS`란? 동작 과정 설명
- 이메일 보내기 할 줄 알아야 함
- 500 오류는 네트워크 문제일 수도 있음

<br>

```java
    스위치  /*네트워크 장비*/
        |
        |   /*메시지(패킷)*/
        |
    공유기  /*네트워크 장비*/
        |
        |   /*메시지(패킷)*/
        |
    호스트  /*네트워크와 연결된 기계*/
            // 웹 서버, 이메일 서버, 파일 서버 등
            // 로드 밸런스 처리 시 호스트도 네트워크 장비가 될 수 있음
```

<br>

```java
    LAN /*가정*/
        // 스위치만 있으면 됨
    |
    |   /*ISP 회선*/
    |   // SK브로드밴드
    | 
    WAN
        // 라우터 필요 (LAN -> WAN)
    |
    LAN /*회사/*
```

<br>

- 메시지 교환 방식에 따른 네트워크 분류
    - |회선 교환 방식|패킷 교환 방식|
        |-|-|
        |망 고정 (효율 ↓)|패킷 스위치 이용 (스위치, 라우터)|

- 패킷 = 헤더 + 페이로드 + 트레일러(오류 검출)

<br>

- 네트워크 찹조 모델
    - ||계층||
        |-|-|-|
        ||응용<br>(= 응용(7) + 표현(6) + 세션(5))|웹 서버|
        |L4|전송|TCP(세그먼트)<br>UDP(데이터그램)|
        |L3|네트워크|IP<br>`IP에 주소가 옴`|
        |L2|데이터 링크|LAN, MAC address|
        |L1|물리|케이블|

<br>

- 캡슐화와 역캡슐화
    - 택배 과정과 같음
        - |보내는 것|받는 것|
            |-|-|
            |캡슐화|역캡슐화|

<br><br>

## Chapter 02 물리 계층과 데이터 링크 계층

<br>

- NIC(Network Interface Controller) = MAC Address
    - ||데이터 링크|물리|
        |-|-|-|
        |NIC|O<br>MAC address가 있음<br>= 스위치가 연결해줘서 내부 LAN망을 ..|X<br>= 주소가 없음|
        ||스위치|허브|
        ||`전이중(양방향)`|`반이중(단방향)`|


<br>

```java
      A
      |
    스위치
    / | \   // 플러딩
    B C D   // C -> 스위치
            // 맥 주소를 찾아서 테이블에 저장
            // 다음부터는 B, D 필터링 / C 포워드
```

<br>

- VLAN(가상 선)

<br><br>

## Chapter 03 네트워크 계층

<br>

- `IP` 주소
    - 잘라서 보냄
    - 헤더가 있음

<br>

```java
    0   4   8   12  16  20      24      28      32
    [식별자            ][플래그][단편화 오프셋   ]
    [TTL   ][프로토콜  ][헤더 체크 섬            ]
    [송신지 IP 주소                              ]
    [수신지 IP 주소                              ]
```
- 플래그
    - 단편화 여부
- `offset`
    - 처음부터 ~까지
- `TTL`(Time-To-Live)
    - 라우터를 거칠 때마다 1씩 감소
    - 인터넷 프로토콜 ..
- 프로토콜
    - TCP
    - UDP

<br>

- `ARP`(Address Resolution Protocol, 주소 결정 프로토콜)
    - IP address -> MAC address
    - 외부 IP address -매핑-> 내부 MAC address

<br>

- IP address
    - 고정된 것 (X) / 할당받는 것 (O)
        - 정적
        - 동적 -> 충돌 가능성 (O)
    - 네트워크 주소 + 호스트 주소

<br>

- 서브넷 마스크
    - `/`24 = 24비트 = 255.255.255.0
        - `/` 의미 기억하기
    - 요즘은 `클래스리스 서브넷 마스크`를 많이 씀

<br>

- `NAT`(Network Address Translation, 네트워크 주소 변환)
    - 공유기 생각하기
    - 외부망(공인 IP) - 내부망(사설 IP)

<br>

- 127.0.0.1
    - 루프백 주소
    - 서버처럼 동작

<br>

- 라우팅
    - 길을 잃을 수 있음 -> 전송 계층이 필요

<br><br>

## Chapter 04 전송 계층

<br>

- ||포트|
    |-|-|
    |http|80|
    |https|443|
    |ssh|22|

<br>

- `NAT`(Network Address Translation, 네트워크 주소 변환)
    - 포트 할당 -> 포트 포워딩

<br>

- |`TCP`|UDP|
    |-|-|
    |신뢰할 수 있는 통신<br>오류가 나도 계속 보냄|신뢰할 수 없는 통신|
    |연결형 통신 (비용 ↑)<br>연결 - 수립 - 종료|비연결형 통신|
    |─ n번째 받아 →<br>← n + 1번째 보내 줘 ─|─ n번째 받아 →<br>─ n + 1번째 받아 →|
    |헤더 + 세그먼트<br>헤더 : 페이먼트가 있음<br>세그먼트 : 한번에 못 보내니까 잘라서 보냄||

<br>

- TCP/IP
    - TCP : 송수신 IP
    - IP : 포트

<br>

- 세그먼트
    - offset과 연결해서 생각하면 좋음

<br>

- TCP 상태 라이프 사이클 알아두면 좋음

<br><br>

## Chapter 05 응용 계층

<br>

- `DNS`(Domain Name System, 도메인 네임 시스템)
    - ```
        http://www.example.com/path/-----
               [DNS           ][쿼리 스트링]
        ```
    - ```
            [2단계]    [루트 도메인]
        www.example.com.
        [3단계]     [최상위]
        ```
    - 도메인 이름을 입력하면 그에 대응하는 IP 주소를 반환함
        - 모든 서버는 IP 주소로 접속함
    - 계층적 네임 서버
        - ```java
            클라이언트
                |
            로컬 네임 서버
                |
            루트 네임 서버  /*.*/
                |
            TLD 네임 서버   /*com*/
                |
            책임 네임 서버  /*example*/
            ```
        - 반복적 - 캐시 - TTL

<br>

- `URI`
    - URL(Location)
        - 도메인을 포함하고 있음
        - ```
                  [authority      ]           [query     ]
            foo://example.com:8042/over/there?name=ferret#nose
            [scheme]               [path     ]           [fragment]
            ```
    - URN(Name)
        - 변하지 않는 자원
            - 글로벌 하게 사용

<br>

- `DNS 레코드 타입`

<br>

- `HTTP`
    - 스테이트리스
        - 연결을 유지하지 않음
        - 요청이 오면 반응하고 끊어 버림
        - 연결을 유지하고 싶으면 connetion을 keep-alive로 설정
    - 메시지 구조
        - |HTTP 메시지|||
            |-|-|-|
            |시작 라인(줄 바꿈)|||
            |필드 라인(줄 바꿈)<br>: 0개 이상|<b>요청 라인</b>|<b>상태 라인</b>|
            ||메서드 (공백) 요청 대상 (공백) HTTP 버전 (줄 바꿈)|HTTP 버전 (공백) 상태 코드 (공백) 이유 구문 (줄 바꿈)<br>이유 구문 : 선택적|
            |(줄 바꿈)|||
            |메시지 본문<br>: 선택적|||
    - |메서드||
        |-|-|
        |GET|가져다주세요|
        |HEAD|헤더만 가져다주세요|
        |POST|처리해 주세요|
        |PUT|덮어써 주세요<br>(수정)|
        |PATCH|일부 수정해 주세요|
        |DELETE|삭제해 주세요|
    - |상태 코드||
        |-|-|
        |200번대|성공 상태 코드|
        |300번대|리다이렉션 상태 코드|
        |400번대|클라이언트 에러 상태 코드|
        |500번대|서버 에러 상태 코드|

<br>

- HTTP 헤더
    - 요청 시 활용되는 HTTP 헤더
    - 응답 시 활용되는 HTTP 헤더
    - 요청과 응답 모두에서 활용되는 HTTP 헤더
    - 캐시
    - 쿠키

<br><br>

## Chapter 07 네트워크 심화

<br>

- 가용성
    - 업타임 / (업타입 + 다운타임)
- 이중화
    - 액티브 + 스탠바이
    - 액티브 + 액티브
- 로드 밸런싱
    - 과도한 트래픽 처리
        - L4(전송 계층) / L7(응용 계층)
        - 라운드 로빈
        - DNS로도 부하를 줄일 수 있음

<br>

- |대칭키 암호화 방식|공개 키 암호화 방식<br>= 비대칭 키 암호화 방식|
    |-|-|
    |암호화 키 = 복호화 키|암호화 키 =/= 복호화 키|

<br><br>

<hr>

<br>

### [그림 한 장으로 외워서 끝내는 웹 서비스 구조 기본이론](https://www.inflearn.com/course/lecture?courseSlug=%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%ED%95%B5%EC%8B%AC%EC%9D%B4%EB%A1%A0-%EA%B8%B0%EC%B4%88&unitId=126849&subtitleLanguage=ko)
